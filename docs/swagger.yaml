components:
  schemas:
    UITypes.ClientUser:
      properties:
        name:
          type: string
        profile_pic_url:
          type: string
        username:
          type: string
      type: object
    appErrors.HTTPError:
      type: object
    passwordResetControllers.confirmEmailBody:
      properties:
        token:
          maxLength: 6
          minLength: 6
          type: string
      type: object
    passwordResetControllers.requestPasswordResetBody:
      properties:
        email:
          format: email
          type: string
      type: object
    passwordResetControllers.resetPasswordBody:
      properties:
        confirmNewPassword:
          format: password
          type: string
        newPassword:
          format: password
          type: string
      type: object
    passwordResetService.passReset1RespT:
      properties:
        msg:
          type: string
      type: object
    passwordResetService.passReset2RespT:
      properties:
        msg:
          type: string
      type: object
    passwordResetService.passReset3RespT:
      properties:
        msg:
          type: string
      type: object
    postCommentControllers.authorizeCommentUploadBody:
      properties:
        attachment_mime:
          type: string
        attachment_size:
          type: integer
      type: object
    postCommentControllers.authorizePostUploadBody:
      properties:
        media_mime:
          items:
            type: string
          type: array
          uniqueItems: false
        media_sizes:
          items:
            items:
              type: integer
            type: array
          type: array
          uniqueItems: false
        post_type:
          type: string
      type: object
    postCommentService.AuthCommAttDataT:
      properties:
        attachmentCloudName:
          type: string
        uploadUrl:
          type: string
      type: object
    postCommentService.AuthPostMediaDataT:
      properties:
        mediaCloudName:
          type: string
        uploadUrl:
          type: string
      type: object
    signinControllers.signInBody:
      properties:
        emailOrUsername:
          type: string
        password:
          format: password
          type: string
      type: object
    signinService.signinRespT:
      properties:
        msg:
          type: string
        user:
          $ref: '#/components/schemas/UITypes.ClientUser'
      type: object
    signupControllers.registerUserBody:
      properties:
        bio:
          type: string
        birthday:
          type: integer
        name:
          type: string
        password:
          format: password
          type: string
        username:
          type: string
      type: object
    signupControllers.requestNewAccountBody:
      properties:
        email:
          format: email
          type: string
      type: object
    signupControllers.verifyEmailBody:
      properties:
        code:
          maxLength: 6
          minLength: 6
          type: string
      type: object
    signupService.signup1RespT:
      properties:
        msg:
          type: string
      type: object
    signupService.signup2RespT:
      properties:
        msg:
          type: string
      type: object
    signupService.signup3RespT:
      properties:
        msg:
          type: string
        user:
          $ref: '#/components/schemas/UITypes.ClientUser'
      type: object
    userControllers.changeProfilePictureBody:
      type: object
    userControllers.editProfileBody:
      type: object
  securitySchemes:
    ApiKeyAuth:
      description: JWT API key in encrypted cookie to protect private endpoints
      in: header
      name: Cookie
      type: apiKey
externalDocs:
  description: ""
  url: ""
info:
  contact:
    email: oluwarinolasam@gmail.com
    name: i9ine
  description: i9lyfe Social Media Backend API.
  title: i9lyfe Backend API
  version: "1.0"
openapi: 3.1.0
paths:
  /app/private/comment_upload/authorize:
    post:
      description: Authorization for comment upload
      parameters:
      - description: User session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/postCommentControllers.authorizeCommentUploadBody'
              description: Request body
              summary: authorizeCommentUploadBody
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/postCommentService.AuthCommAttDataT'
          description: OK
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Validation Error
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Server Error
      summary: Authorize comment upload
      tags:
      - app/private
  /app/private/me:
    get:
      description: Get info on the user currently in session
      parameters:
      - description: User session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/UITypes.ClientUser'
          description: User info
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Get session user
      tags:
      - app/private
  /app/private/me/change_profile_picture:
    put:
      description: Change user profile picture
      parameters:
      - description: User session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/userControllers.changeProfilePictureBody'
              description: Request body
              summary: changeProfilePictureBody
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                type: boolean
          description: Done
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Change user profile picture
      tags:
      - app/private
  /app/private/me/edit_profile:
    put:
      description: Edit user profile
      parameters:
      - description: User session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/userControllers.editProfileBody'
              description: Request body
              summary: editProfileBody
        description: Request body
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                type: boolean
          description: Done
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Edit user profile
      tags:
      - app/private
  /app/private/me/signout:
    get:
      description: Signout the user currently in session
      parameters:
      - description: User session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                type: string
          description: Bye message
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Signout user
      tags:
      - app/private
  /app/private/post_upload/authorize:
    post:
      description: Authorization for post upload
      parameters:
      - description: User session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/postCommentControllers.authorizePostUploadBody'
              description: Request body
              summary: authorizePostUploadBody
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                items:
                  $ref: '#/components/schemas/postCommentService.AuthPostMediaDataT'
                type: array
          description: OK
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Validation Error
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Server Error
      summary: Authorize post upload
      tags:
      - app/private
  /app/private/users/:username/follow:
    post:
      description: Follow user
      parameters:
      - description: User to follow
        in: path
        name: username
        required: true
        schema:
          type: string
      - description: User session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                type: boolean
          description: Done
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Validation error | User trying to follow self
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Follow user
      tags:
      - app/private
  /app/private/users/:username/unfollow:
    delete:
      description: Unfollow user
      parameters:
      - description: User to unfollow
        in: path
        name: username
        required: true
        schema:
          type: string
      - description: User session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                type: boolean
          description: Done
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Unfollow user
      tags:
      - app/private
  /auth/forgot_password/confirm_email:
    post:
      description: Provide the 6-digit token sent to email
      parameters:
      - description: Password Reset session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/passwordResetControllers.confirmEmailBody'
              description: Request body
              summary: confirmEmailBody
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/passwordResetService.passReset2RespT'
          description: Email confirmed. You're about to reset your password
          headers:
            Set-cookie:
              description: Password Reset session request cookie
              schema:
                type: string
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Incorrect or expired confirmation token
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Password Reset - Step 2
      tags:
      - auth
  /auth/forgot_password/request_password_reset:
    post:
      description: Submit your email to request a password reset
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/passwordResetControllers.requestPasswordResetBody'
              description: Request body
              summary: requestPasswordResetBody
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/passwordResetService.passReset1RespT'
          description: Proceed to email confirmation
          headers:
            Set-cookie:
              description: Password Reset session response cookie
              schema:
                type: string
        "404":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: No user with this email exists
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Password Reset - Step 1
      tags:
      - auth
  /auth/forgot_password/reset_password:
    post:
      description: Set new password
      parameters:
      - description: Password Reset session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/passwordResetControllers.resetPasswordBody'
              description: Choose a new password
              summary: resetPasswordBody
          application/vnd.msgpack:
            schema:
              type: string
        description: Choose a new password
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/passwordResetService.passReset3RespT'
          description: Password changed successfully
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Passwords mismatch.
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Password Reset user - Step 3
      tags:
      - auth
  /auth/signin:
    post:
      description: Signin with email/username and password
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/signinControllers.signInBody'
              description: Request body
              summary: signInBody
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/signinService.signinRespT'
          description: Signin Success!
          headers:
            Set-cookie:
              description: Authenticated user session response cookie containing auth
                JWT
              schema:
                type: string
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Bad Request
        "404":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Incorrect credentials
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Signin user
      tags:
      - auth
  /auth/signup/register_user:
    post:
      description: Provide remaining user credentials
      parameters:
      - description: Signup session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/signupControllers.registerUserBody'
              description: Request body
              summary: registerUserBody
          application/vnd.msgpack:
            schema:
              type: string
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/signupService.signup3RespT'
          description: Signup Success
          headers:
            Set-cookie:
              description: Authenticated user session response cookie containing auth
                JWT
              schema:
                type: string
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Incorrect or expired verification code
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Signup user - Step 3
      tags:
      - auth
  /auth/signup/request_new_account:
    post:
      description: Submit email to request a new account
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/signupControllers.requestNewAccountBody'
              description: Request body
              summary: requestNewAccountBody
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/signupService.signup1RespT'
          description: Proceed to email verification
          headers:
            Set-cookie:
              description: Signup session response cookie
              schema:
                type: string
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: An account with email already exists
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Signup user - Step 1
      tags:
      - auth
  /auth/signup/verify_email:
    post:
      description: Provide the 6-digit code sent to email
      parameters:
      - description: Signup session request cookie
        in: header
        name: Cookie
        required: true
        schema:
          items:
            type: string
          type: array
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/signupControllers.verifyEmailBody'
              description: Request body
              summary: verifyEmailBody
        description: Request body
        required: true
      responses:
        "200":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/signupService.signup2RespT'
          description: Email verified
          headers:
            Set-cookie:
              description: Signup session response cookie
              schema:
                type: string
        "400":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Incorrect or expired verification code
        "500":
          content:
            application/vnd.msgpack:
              schema:
                $ref: '#/components/schemas/appErrors.HTTPError'
          description: Internal Server Error
      summary: Signup user - Step 2
      tags:
      - auth
servers:
- url: https://localhost:8000/api
